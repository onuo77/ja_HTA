<%@page import="com.sample.hr.vo.Department"%>
<%@page import="com.sample.hr.dao.DepartmentDao"%>
<%@page import="com.sample.hr.vo.Employee"%>
<%@page import="com.sample.hr.dao.EmployeeDao"%>
<%@page import="com.sample.hr.vo.Job"%>
<%@page import="java.util.List"%>
<%@page import="com.sample.hr.dao.JobDao"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">    
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>인사관리 :: 사원관리</title>
</head>
<body>
<!-- 
	신규 사원정보를 등록하는 폼
	1. 사원아이디, 입사일, 매니저 아이디는 입력폼에서 별로도 입력하지 않는다.
		신규사원은 전부 Human resources 부서의  203번 직원이 관리한다.
		매니저 아이디는 히든 필드로  표시했다.
	2. 입력한 모든 값들은 add.jsp로 제출된다.
	
	* 추가 사항
	직종정보와 부서정보를 데이터베이스에서 조회해서 추가하기
	
 -->
	<div class="container">
		<div class="row">
			<div class="col-12">
				<h1>사원 등록폼</h1>
			</div>
		</div>
		
		<%
			JobDao jobDao = new JobDao();
			List<Job> jobs = jobDao.allJobs();
			
			EmployeeDao empDao = new EmployeeDao();
			List<Employee> employees = empDao.getAllEmployees();
			
			DepartmentDao deptDao = new DepartmentDao();
			List<Department> departments = deptDao.getAllDepartments();
		%>
		
		<div class="row">
			<div class="col-12 border p-3 bg-light">
				<form method="post" action="add.jsp">
					<input type="hidden" name="managerId" value="203"/>
					<div class="form-row">
    					<div class="form-group col-md-6">
      						<label>First Name</label>
      						<input type="text" class="form-control" name="firstName">
    					</div>
    					<div class="form-group col-md-6">
      						<label>Last Name</label>
      						<input type="text" class="form-control" name="lastName">
    					</div>
  					</div>
					<div class="form-row">
    					<div class="form-group col-md-6">
      						<label>Email</label>
      						<input type="text" class="form-control" name="email">
    					</div>
    					<div class="form-group col-md-6">
      						<label>Phone Number</label>
      						<input type="text" class="form-control" name="phoneNumber">
    					</div>
  					</div>
					<div class="form-row">
    					<div class="form-group col-md-6">
      						<label>Job</label>
      						<select class="form-control" name="jobId">
      							<option value=""> 직종을 선택하세요</option>
    							<%
									for(Job job : jobs){
								%>
									<option value="<%=job.getId() %>"><%= job.getTitle()%> (<%=job.getId() %>)</option>
								<%
									}
								%>   							
      						</select>
    					</div>
    					<div class="form-group col-md-6">
      						<label>Department</label>
      						<select class="form-control" name="departmentId">
      							<option value=""> 소속부서를 선택하세요</option>
      							<option value="10"> Administration</option>      							
      							<option value="20"> Marketing</option>      							
      							<option value="30"> Purchasing</option>      							
      							<option value="40"> Human Resources</option>      							
      							<option value="50"> Shipping</option>      							
      							<option value="60"> IT Tech</option>      							
      							<option value="70"> Public Relations</option>      							
      							<option value="80"> Sales</option>      							
      							<option value="90"> Executive</option>      							
      							<option value="100"> Finance</option>      							
      							<option value="110"> Accounting</option>      							
      						</select>
    					</div>
  					</div>
  					<div class="form-row">
    					<div class="form-group col-md-6">
      						<label>Salary</label>
      						<select class="form-control" name="salary">
      							<option value="2000"> 2000</option>
      							<option value="3000"> 3000</option>
      							<option value="4000"> 4000</option>
      							<option value="5000"> 5000</option>
      							<option value="6000"> 6000</option>
      							<option value="7000"> 7000</option>
      						</select>
    					</div>
    					<div class="form-group col-md-6">
      						<label>Commission_pct</label>
      						<select class="form-control" name="commissionPct">
      							<option value="0.1"> 0.1</option>
      							<option value="0.15"> 0.15</option>
      							<option value="0.2"> 0.2</option>
      							<option value="0.25"> 0.25</option>
      							<option value="0.3"> 0.3</option>
      							<option value="0.35"> 0.35</option>
      							<option value="0.4"> 0.4</option>
      						</select>
    					</div>
  					</div>
  					<div class="form-group col-12 text-right">
  						<a href="main.jsp" class="btn btn-secondary">취소</a>
  						<button type="submit" class="btn btn-primary">등록</button>
  					</div>
				</form>
			</div>
		</div>
	</div>

	<h3>새 사원 등록폼</h3>
	<form method="post" action="add.jsp">
		<label>이름(first_name)</label><br/>
		<input type="text" name="firstName"><br/>
		<label>성(last name)</label><br/>
		<input type="text" name="lastName"><br/>
		<label>이메일</label><br/>
		<input type="text" name="email"><br/>
		<label>전화번호</label><br/>
		<input type="text" name="phoneNumber"><br/>
		<label>급여</label><br/>
		<input type="number" name="salary"><br/>
		<label>커미션</label><br/>
		<input type="radio" name="commissionPct" value="0">없음
		<input type="radio" name="commissionPct" value="0.1">0.1
		<input type="radio" name="commissionPct" value="0.15">0.15
		<input type="radio" name="commissionPct" value="0.2">0.2
		<input type="radio" name="commissionPct" value="0.25">0.25
		<input type="radio" name="commissionPct" value="0.3">0.3
		<input type="radio" name="commissionPct" value="0.35">0.35
		<input type="radio" name="commissionPct" value="0.4">0.4<br/>
		<label>직종선택</label><br/>
		<select name="jobId">
			<option>-- 선택하세요 --</option>
			<%
				for(Job job : jobs){
			%>
				<option value="<%=job.getId() %>"><%= job.getTitle()%> (<%=job.getId() %>)</option>
			<%
				}
			%>
		</select><br/>
		<label>매니저선택</label><br/>
		<select name="managerId">
			<option>-- 선택하세요 --</option>
			<%
				for(Employee emp : employees){
			%>
				<option value="<%=emp.getId() %>"><%= emp.getFirstName()%> <%= emp.getLastName()%> (<%=emp.getId() %>)</option>			
			<%
				}
			%>
		</select><br/>
		<label>부서선택</label><br/>
		<select name="departmentId">
			<option>-- 선택하세요 --</option>
			<%
				for(Department dept : departments){
			%>
				<option value="<%=dept.getId() %>"><%= dept.getName()%> (<%=dept.getId() %>)</option>
			<%
				}
			%>			
		</select><br/>
		
		
		<button type="submit">사원 등록</button>
	</form>
	
</body>
</html>